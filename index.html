<!DOCTYPE html>
<html>
<head>
    <title>Live Scoreboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        @font-face { font-family: 'DSEG7'; src: url('DSEG7.ttf'); }
        body { background: black; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; margin: 0; font-family: Arial, sans-serif; color: white; overflow: hidden; }
        
        .row-container { width: 700px; margin-bottom: 2vh; display: flex; flex-direction: column; }
        .digit-row { display: grid; grid-template-columns: repeat(11, 1fr); column-gap: 2px; }
        
        .top-row-grid { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            width: 100%; 
            margin-bottom: 2.5vh; 
        }

        .batter-id-group, .clock-group { display: flex; align-items: center; gap: 0; }
        
        .top-digit-wrap { width: 3.8vh; display: flex; justify-content: center; position: relative; aspect-ratio: 1/1.5; }
        
        /* Centering the colon halfway up the digits */
        .clock-colon-wrap { 
            width: 1.8vh; 
            display: flex; 
            justify-content: center; 
            align-items: center;
            position: relative; 
            aspect-ratio: 1/1.5; 
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.1; }
        }
        .blinking { animation: blink 1s step-start infinite; }

        .label-row { display: grid; grid-template-columns: repeat(3, 1fr); column-gap: 2px; }
        .label { text-transform: uppercase; font-weight: bold; text-align: center; font-size: 4.5vh; color: white; padding: 0.5vh 0; transition: color 0.4s ease; }
        .label.inactive { color: #222; }
        
        .top-labels { margin-top: 0; margin-bottom: 2vh; }

        .cell { position: relative; width: 100%; aspect-ratio: 1 / 1.5; display: flex; justify-content: center; align-items: center; }
        .dim, .bright { font-size: 8vh; position: absolute; font-family: 'DSEG7', monospace; line-height: 1; }
        .dim { color: #180300; z-index: 1; }
        .bright { color: #ff5500; z-index: 2; text-shadow: 0 0 10px rgba(255,0,0,0.5); }

        #row0 .dim, #row0 .bright { font-size: 5.33vh; line-height: 1; }
        
        /* Fine-tune colon vertical position */
        .clock-colon-wrap .bright, .clock-colon-wrap .dim { transform: translateY(-5%); }

        #fs-btn { position: fixed; bottom: 20px; right: 20px; background: rgba(255, 255, 255, 0.1); color: #666; border: 1px solid #444; padding: 8px 12px; cursor: pointer; font-size: 12px; border-radius: 4px; z-index: 100; }
        :fullscreen #fs-btn { opacity: 0; }

        @media (max-width: 767px) {
            .row-container { width: 96vw; }
            .dim, .bright { font-size: 8.5vw; }
            #row0 .dim, #row0 .bright { font-size: 6vw; }
            /* Increased mobile label size */
            .label { font-size: 4vw; } 
            .top-digit-wrap { width: 4.5vw; }
            .clock-colon-wrap { width: 2.5vw; }
            .top-row-grid { margin-bottom: 1.5vh; }
        }
    </style>
</head>
<body>
    <button id="fs-btn" onclick="toggleFullscreen()">FULLSCREEN</button>

    <div class="row-container">
        <div id="row0" class="top-row-grid"></div>
        <div class="label-row top-labels">
            <div id="lbl-b1" class="label">Batter</div>
            <div id="lbl-total" class="label">Total</div>
            <div id="lbl-b2" class="label">Batter</div>
        </div>
        <div id="row1" class="digit-row"></div>
    </div>

    <div class="row-container">
        <div class="label-row">
            <div id="lbl-inns" class="label">1st Inns</div>
            <div id="lbl-wickets" class="label">Wickets</div>
            <div id="lbl-overs" class="label">Overs</div>
        </div>
        <div id="row2" class="digit-row"></div>
    </div>

    <div class="row-container">
        <div class="label-row">
            <div id="lbl-dls" class="label">DLS Par</div>
            <div id="lbl-win" class="label">To Win</div>
            <div id="lbl-rem" class="label">Overs Rem</div>
        </div>
        <div id="row3" class="digit-row"></div>
    </div>

    <script>
        const NPOINT_ID = "e5ab2c288d26e7ce23ca"; 

        function toggleFullscreen() {
            if (!document.fullscreenElement) document.documentElement.requestFullscreen();
            else document.exitFullscreen();
        }

        function createTopDigit(char, isColon = false) {
            const wrap = document.createElement('div');
            wrap.className = isColon ? 'clock-colon-wrap' : 'top-digit-wrap';
            
            const d = document.createElement('div');
            d.className = 'dim'; 
            d.textContent = isColon ? ':' : '8';
            wrap.appendChild(d);

            if (char !== " " && char !== "") {
                const b = document.createElement('div');
                b.className = isColon ? 'bright blinking' : 'bright'; 
                b.textContent = char;
                wrap.appendChild(b);
            }
            return wrap;
        }

        async function updateScore() {
            try {
                const response = await fetch(`https://api.npoint.io/${NPOINT_ID}?t=${Date.now()}`);
                const vals = await response.json(); 
                if (!vals || vals.length === 0) return;

                const check = (id, val) => {
                    const el = document.getElementById(id);
                    if (el) el.classList.toggle('inactive', !(val !== null && val !== undefined && val.toString().trim() !== ""));
                };
                const labelMap = ['lbl-b1','lbl-b2','lbl-total','lbl-inns','lbl-wickets','lbl-overs','lbl-dls','lbl-win','lbl-rem'];
                const dataIndices = [0,1,4,10,5,6,13,11,12];
                labelMap.forEach((id, i) => check(id, vals[dataIndices[i]]));

                const r0 = document.getElementById('row0');
                r0.innerHTML = '';
                const now = new Date();
                const hh = now.getHours().toString().padStart(2,'0');
                const mm = now.getMinutes().toString().padStart(2,'0');
                const b1_val = (vals[0] || "").toString().padStart(2," ").slice(-2);
                const b2_val = (vals[1] || "").toString().padStart(2," ").slice(-2);

                const b1_grp = document.createElement('div'); b1_grp.className = 'batter-id-group';
                b1_grp.appendChild(createTopDigit(b1_val[0])); b1_grp.appendChild(createTopDigit(b1_val[1]));

                const clk_grp = document.createElement('div'); clk_grp.className = 'clock-group';
                clk_grp.appendChild(createTopDigit(hh[0])); clk_grp.appendChild(createTopDigit(hh[1]));
                clk_grp.appendChild(createTopDigit(':', true));
                clk_grp.appendChild(createTopDigit(mm[0])); clk_grp.appendChild(createTopDigit(mm[1]));

                const b2_grp = document.createElement('div'); b2_grp.className = 'batter-id-group';
                b2_grp.appendChild(createTopDigit(b2_val[0])); b2_grp.appendChild(createTopDigit(b2_val[1]));

                r0.appendChild(b1_grp); r0.appendChild(clk_grp); r0.appendChild(b2_grp);

                const pad = (v, l) => (v || "").toString().padStart(l, " ").slice(-l);
                const rowsData = [
                    (pad(vals[2], 3) + " " + pad(vals[4], 3) + " " + pad(vals[3], 3)).split(''), 
                    (pad(vals[10], 3) + "  " + pad(vals[5], 2) + "  " + pad(vals[6], 2)).split(''), 
                    (pad(vals[13], 3) + " " + pad(vals[11], 3) + "  " + pad(vals[12], 2)).split('')
                ];

                ['row1', 'row2', 'row3'].forEach((id, rIdx) => {
                    const container = document.getElementById(id);
                    container.innerHTML = '';
                    rowsData[rIdx].forEach((char, cIdx) => {
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        if (char !== " ") {
                            const d = document.createElement('div'); d.className = 'dim'; d.textContent = (char === ":") ? ":" : "8";
                            const b = document.createElement('div'); b.className = 'bright'; b.textContent = char;
                            cell.appendChild(d); cell.appendChild(b);
                        } else {
                            const isGap = (rIdx===1 && (cIdx===3||cIdx===4||cIdx===7||cIdx===8)) || (rIdx===2 && (cIdx===3||cIdx===7||cIdx===8));
                            if (!isGap) {
                                const d = document.createElement('div'); d.className = 'dim'; d.textContent = '8'; cell.appendChild(d);
                            }
                        }
                        container.appendChild(cell);
                    });
                });
            } catch (e) { console.log(e); }
        }
        setInterval(updateScore, 3000);
        window.onload = updateScore;
    </script>
</body>
</html>
